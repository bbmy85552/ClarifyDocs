---
title: Fumadocs é¡¹ç›®æ–‡æ¡£
description: good
---

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº [Fumadocs](https://fumadocs.vercel.app) æ„å»ºçš„æ–‡æ¡£ç½‘ç«™é¡¹ç›®ï¼Œä¸»è¦ç”¨äºå±•ç¤º Telegram æœºå™¨äººå¼€å‘ç›¸å…³çš„æ•™ç¨‹å’ŒæŒ‡å—ã€‚é¡¹ç›®é‡‡ç”¨ Next.js 15 + React 19 + TypeScript æŠ€æœ¯æ ˆï¼Œå¹¶é›†æˆäº†è‡ªå®šä¹‰çš„å¢å¼ºåŠŸèƒ½ã€‚

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Next.js 15.4.2
- **UI åº“**: React 19.1.0
- **æ–‡æ¡£æ¡†æ¶**: Fumadocs (Core 15.6.5, UI 15.6.5, MDX 11.7.0)
- **æ ·å¼**: Tailwind CSS 4.1.11
- **å›¾æ ‡**: Lucide React 0.544.0
- **è¯­è¨€**: TypeScript 5.8.3
- **åŒ…ç®¡ç†**: pnpm

## é¡¹ç›®ç»“æ„

```
fumadocs/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ (home)/                   # é¦–é¡µè·¯ç”±ç»„
â”‚   â”‚   â”œâ”€â”€ layout.tsx           # é¦–é¡µå¸ƒå±€
â”‚   â”‚   â””â”€â”€ page.tsx             # é¦–é¡µå†…å®¹
â”‚   â”œâ”€â”€ api/                     # API è·¯ç”±
â”‚   â”‚   â””â”€â”€ search/              # æœç´¢åŠŸèƒ½
â”‚   â”‚       â””â”€â”€ route.ts         # æœç´¢è·¯ç”±å¤„ç†
â”‚   â”œâ”€â”€ docs/                    # æ–‡æ¡£é¡µé¢
â”‚   â”‚   â”œâ”€â”€ [[...slug]]/         # åŠ¨æ€è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx         # æ–‡æ¡£é¡µé¢æ¸²æŸ“
â”‚   â”‚   â””â”€â”€ layout.tsx           # æ–‡æ¡£å¸ƒå±€
â”‚   â”œâ”€â”€ global.css               # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ layout.config.tsx        # å¸ƒå±€é…ç½®
â”‚   â””â”€â”€ layout.tsx               # æ ¹å¸ƒå±€
â”œâ”€â”€ components/                   # è‡ªå®šä¹‰ç»„ä»¶
â”‚   â””â”€â”€ custom-docs-page.tsx     # å¢å¼ºæ–‡æ¡£é¡µé¢ç»„ä»¶ â­
â”œâ”€â”€ content/                     # æ–‡æ¡£å†…å®¹
â”‚   â””â”€â”€ docs/                    # æ–‡æ¡£æ–‡ä»¶
â”‚       â””â”€â”€ index.mdx            # Telegram Bot æ•™ç¨‹
â”œâ”€â”€ lib/                         # å·¥å…·åº“
â”‚   â””â”€â”€ source.ts                # å†…å®¹æºé€‚é…å™¨
â”œâ”€â”€ mdx-components.tsx           # MDX ç»„ä»¶é…ç½®
â”œâ”€â”€ next.config.mjs              # Next.js é…ç½®
â”œâ”€â”€ source.config.ts             # Fumadocs MDX é…ç½®
â””â”€â”€ package.json                 # é¡¹ç›®ä¾èµ–
```

## æ ¸å¿ƒåŠŸèƒ½

### 1. åŸºç¡€æ–‡æ¡£ç³»ç»Ÿ

åŸºäº Fumadocs æä¾›çš„å®Œæ•´æ–‡æ¡£è§£å†³æ–¹æ¡ˆï¼š
- MDX æ–‡ä»¶æ”¯æŒ
- è‡ªåŠ¨è·¯ç”±ç”Ÿæˆ
- æœç´¢åŠŸèƒ½
- å“åº”å¼å¸ƒå±€
- æš—è‰²ä¸»é¢˜æ”¯æŒ

### 2. è‡ªå®šä¹‰å¢å¼ºåŠŸèƒ½ â­

#### å³ä¾§ç›®å½•ç»“æ„ (Table of Contents)

**åŠŸèƒ½ç‰¹ç‚¹ï¼š**
- ğŸ¯ **æ™ºèƒ½å±‚çº§æ˜¾ç¤º**: æ ¹æ® Markdown æ ‡é¢˜å±‚çº§è‡ªåŠ¨ç”Ÿæˆç›®å½•æ ‘
- ğŸ¨ **è§†è§‰å±‚çº§åŒºåˆ†**: ä¸åŒå±‚çº§ä½¿ç”¨ä¸åŒçš„ç¼©è¿›ã€å­—ä½“å¤§å°å’Œé¢œè‰²
- ğŸ“± **å“åº”å¼äº¤äº’**: æ”¯æŒæ˜¾ç¤º/éšè—åˆ‡æ¢ï¼Œé€‚é…ä¸åŒå±å¹•å°ºå¯¸
- ğŸ”„ **å¹³æ»‘åŠ¨ç”»**: ä½¿ç”¨ CSS Transform å®ç°æµç•…çš„å±•å¼€æ”¶èµ·æ•ˆæœ

**æŠ€æœ¯å®ç°ï¼š**

```typescript
// ç›®å½•é¡¹æ¸²æŸ“é€»è¾‘
const renderTocItem = (item: any) => {
    const level = item.depth || 0;
    
    // æ ¹æ®å±‚çº§è®¾ç½®ç¼©è¿›
    const indentClass = level === 1 ? 'pl-0' :
        level === 2 ? 'pl-3' :
        level === 3 ? 'pl-6' :
        level === 4 ? 'pl-9' :
        level === 5 ? 'pl-12' : 'pl-15';
    
    // æ ¹æ®å±‚çº§è®¾ç½®å­—ä½“æ ·å¼
    const textSizeClass = level === 1 ? 'text-sm' : 
        level === 2 ? 'text-sm' : 'text-xs';
    const fontWeightClass = level === 1 ? 'font-semibold' : 
        level === 2 ? 'font-medium' : 'font-normal';
};
```

**äº¤äº’ç‰¹æ€§ï¼š**
- **å›ºå®šå®šä½**: å³ä¾§å›ºå®š 320px å®½åº¦ä¾§è¾¹æ 
- **åˆ‡æ¢æ§åˆ¶**: é€šè¿‡ `isTocVisible` çŠ¶æ€æ§åˆ¶æ˜¾ç¤º/éšè—
- **æ‚¬æµ®æŒ‰é’®**: éšè—æ—¶æ˜¾ç¤ºåœ†å½¢æ‚¬æµ®æŒ‰é’®å¿«é€Ÿå±•å¼€
- **å¹³æ»‘è¿‡æ¸¡**: 300ms CSS transition åŠ¨ç”»æ•ˆæœ

#### é¡µé¢å­—æ•°ç»Ÿè®¡

**åŠŸèƒ½ç‰¹ç‚¹ï¼š**
- ğŸ”¢ **æ™ºèƒ½è®¡ç®—**: ä¸­è‹±æ–‡æ··åˆå†…å®¹çš„ç²¾ç¡®å­—æ•°ç»Ÿè®¡
- ğŸ¯ **å®æ—¶æ›´æ–°**: åŸºäº DOM å†…å®¹å®æ—¶è®¡ç®—ï¼Œç¡®ä¿å‡†ç¡®æ€§
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ**: ä¸­æ–‡å­—ç¬¦æŒ‰å­—è®¡ç®—ï¼Œè‹±æ–‡æŒ‰å•è¯è®¡ç®—
- â±ï¸ **æ€§èƒ½ä¼˜åŒ–**: ä½¿ç”¨ useRef å’Œ setTimeout é¿å…é‡å¤è®¡ç®—

**æŠ€æœ¯å®ç°ï¼š**

```typescript
const calculateWordCount = () => {
    let textContent = '';
    
    // ä¼˜å…ˆä»DOMè·å–å®é™…æ¸²æŸ“çš„æ–‡æœ¬
    if (contentRef.current) {
        textContent = contentRef.current.textContent || '';
    } else if (content) {
        textContent = content.toString();
    }
    
    if (textContent) {
        // æ–‡æœ¬æ¸…ç†ï¼šåˆå¹¶ç©ºæ ¼å’Œæ¢è¡Œ
        const cleanText = textContent
            .replace(/\s+/g, ' ')
            .trim();
        
        // åˆ†åˆ«è®¡ç®—ä¸­æ–‡å­—ç¬¦å’Œè‹±æ–‡å•è¯
        const chineseChars = (cleanText.match(/[\u4e00-\u9fa5]/g) || []).length;
        const englishWords = cleanText
            .replace(/[\u4e00-\u9fa5]/g, '') // ç§»é™¤ä¸­æ–‡å­—ç¬¦
            .split(/\s+/)
            .filter(word => word.length > 0).length;
        
        setWordCount(chineseChars + englishWords);
    }
};
```

**ç»Ÿè®¡é€»è¾‘ï¼š**
- **ä¸­æ–‡å­—ç¬¦**: ä½¿ç”¨æ­£åˆ™ `[\u4e00-\u9fa5]` åŒ¹é…ä¸­æ–‡å­—ç¬¦ï¼Œæ¯ä¸ªå­—ç¬¦è®¡ä¸º 1 å­—
- **è‹±æ–‡å†…å®¹**: æŒ‰ç©ºæ ¼åˆ†å‰²åè¿‡æ»¤ç©ºå­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå•è¯è®¡ä¸º 1 å­—
- **æ··åˆè®¡ç®—**: ä¸­æ–‡å­—ç¬¦æ•° + è‹±æ–‡å•è¯æ•° = æ€»å­—æ•°
- **DOMä¼˜å…ˆ**: ä¼˜å…ˆä½¿ç”¨å®é™…æ¸²æŸ“çš„ DOM å†…å®¹ï¼Œç¡®ä¿ç»Ÿè®¡å‡†ç¡®æ€§

**æ˜¾ç¤ºæ•ˆæœï¼š**
```
æœ¬æ–‡å…± 123 å­—    æœ€åæ›´æ–°: 2025/9/20
```

### 3. å†…å®¹ç®¡ç†

**MDX æ”¯æŒï¼š**
- æ”¯æŒ Markdown è¯­æ³•å’Œ React ç»„ä»¶
- è‡ªå®šä¹‰ frontmatter é…ç½®
- å›¾ç‰‡å’Œåª’ä½“æ–‡ä»¶æ”¯æŒ

**å†…å®¹ç»“æ„ï¼š**
- `/content/docs/` - ä¸»è¦æ–‡æ¡£å†…å®¹
- æ”¯æŒåµŒå¥—ç›®å½•ç»“æ„
- è‡ªåŠ¨ç”Ÿæˆå¯¼èˆªå’Œé¢åŒ…å±‘

## é…ç½®è¯´æ˜

### 1. Next.js é…ç½® (next.config.mjs)

```javascript
const config = {
  reactStrictMode: true,
  images: {
    remotePatterns: [
      {
        protocol: 'https',
        hostname: 'pic.616pic.com',  // é™åˆ¶å›¾ç‰‡åŸŸå
        port: '',
        pathname: '/**',
      },
    ],
  },
};
```

### 2. Fumadocs é…ç½® (source.config.ts)

```typescript
export const docs = defineDocs({
  docs: {
    schema: frontmatterSchema,  // æ–‡æ¡£å…ƒæ•°æ®æ¨¡å¼
  },
  meta: {
    schema: metaSchema,         // å¯¼èˆªå…ƒæ•°æ®æ¨¡å¼
  },
});
```

### 3. å¸ƒå±€é…ç½® (app/layout.config.tsx)

```typescript
export const baseOptions: BaseLayoutProps = {
  nav: {
    title: "My App",          // å¯¼èˆªæ ‡é¢˜
  },
  links: [],                  // å¯¼èˆªé“¾æ¥
};
```

## å¼€å‘æŒ‡å—

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# ä½¿ç”¨ pnpm (æ¨è)
pnpm dev

# ä½¿ç”¨ npm
npm run dev

# ä½¿ç”¨ yarn
yarn dev
```

è®¿é—® http://localhost:3000 æŸ¥çœ‹æ•ˆæœ

### æ„å»ºéƒ¨ç½²

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm start
```

### æ·»åŠ æ–°æ–‡æ¡£

1. åœ¨ `/content/docs/` ä¸‹åˆ›å»º `.mdx` æ–‡ä»¶
2. æ·»åŠ  frontmatter å…ƒæ•°æ®ï¼š
   ```yaml
   ---
   title: æ–‡æ¡£æ ‡é¢˜
   description: æ–‡æ¡£æè¿°
   ---
   ```
3. ç¼–å†™ Markdown å†…å®¹
4. ç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆè·¯ç”±å’Œå¯¼èˆª

### è‡ªå®šä¹‰ç»„ä»¶

åœ¨ `mdx-components.tsx` ä¸­æ·»åŠ è‡ªå®šä¹‰ MDX ç»„ä»¶ï¼š

```typescript
export function getMDXComponents(components?: MDXComponents): MDXComponents {
  return {
    ...defaultMdxComponents,
    // æ·»åŠ è‡ªå®šä¹‰ç»„ä»¶
    CustomComponent: MyCustomComponent,
    ...components,
  };
}
```

## éƒ¨ç½²é…ç½®

### Vercel éƒ¨ç½²

é¡¹ç›®å·²é…ç½® `vercel.json`ï¼š

```json
{
  "buildCommand": "npm run build",
  "outputDirectory": ".next",
  "installCommand": "npm install",
  "framework": "nextjs"
}
```

### ç¯å¢ƒè¦æ±‚

- Node.js 18+
- pnpm 8+ (æ¨è)
- ç°ä»£æµè§ˆå™¨æ”¯æŒ

## ç‰¹è‰²äº®ç‚¹

### 1. ç”¨æˆ·ä½“éªŒä¼˜åŒ–

- **ğŸ“– æ²‰æµ¸å¼é˜…è¯»**: è‡ªå®šä¹‰ç›®å½•ä¾§è¾¹æ ï¼Œä¸å¹²æ‰°ä¸»è¦å†…å®¹
- **ğŸ“Š é˜…è¯»è¿›åº¦**: å®æ—¶å­—æ•°ç»Ÿè®¡ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£å†…å®¹é•¿åº¦
- **ğŸ¨ è§†è§‰å±‚æ¬¡**: æ¸…æ™°çš„ç›®å½•å±‚çº§å’Œè§†è§‰åé¦ˆ
- **ğŸ“± å“åº”å¼è®¾è®¡**: é€‚é…å„ç§å±å¹•å°ºå¯¸

### 2. å¼€å‘ä½“éªŒ

- **ğŸ”§ ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript æ”¯æŒ
- **âš¡ å¿«é€Ÿå¼€å‘**: Turbo æ¨¡å¼å’Œçƒ­é‡è½½
- **ğŸ¯ æ¨¡å—åŒ–**: æ¸…æ™°çš„ç»„ä»¶å’Œé…ç½®åˆ†ç¦»
- **ğŸ“ æ˜“äºæ‰©å±•**: åŸºäº Fumadocs çš„æ ‡å‡†åŒ–æ¶æ„

### 3. æ€§èƒ½ä¼˜åŒ–

- **ğŸš€ é™æ€ç”Ÿæˆ**: Next.js é™æ€é¡µé¢ç”Ÿæˆ
- **ğŸ’¾ æ™ºèƒ½ç¼“å­˜**: åˆç†çš„ç¼“å­˜ç­–ç•¥
- **ğŸ“¦ ä»£ç åˆ†å‰²**: è‡ªåŠ¨çš„ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
- **ğŸ¨ CSS ä¼˜åŒ–**: Tailwind CSS çš„æŒ‰éœ€åŠ è½½

## æœªæ¥è§„åˆ’

- [ ] æ·»åŠ æ›´å¤šæ–‡æ¡£å†…å®¹
- [ ] å¢å¼ºæœç´¢åŠŸèƒ½
- [ ] æ·»åŠ è¯„è®ºç³»ç»Ÿ
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯ä¼˜åŒ–

## æŠ€æœ¯æ”¯æŒ

- [Fumadocs å®˜æ–¹æ–‡æ¡£](https://fumadocs.vercel.app)
- [Next.js å®˜æ–¹æ–‡æ¡£](https://nextjs.org/docs)
- [Tailwind CSS æ–‡æ¡£](https://tailwindcss.com/docs)

---

*æœ¬æ–‡æ¡£æœ€åæ›´æ–°: 2025å¹´9æœˆ20æ—¥*
